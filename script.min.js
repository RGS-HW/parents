/**
 *  parents: The timer projected for Parentsâ€™ Evenings in the main hall.
 *  <https://github.com/rgshw/parents/>
 *  Copyright (C) 2018 Matt Cowley (MattIPv4) (me@mattcowley.co.uk)
 *
 *  This program is free software: you can redistribute it and/or modify
 *   it under the terms of the GNU Affero General Public License as published
 *   by the Free Software Foundation, either version 3 of the License, or
 *   (at your option) any later version.
 *  This program is distributed in the hope that it will be useful,
 *   but WITHOUT ANY WARRANTY; without even the implied warranty of
 *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *   GNU General Public License for more details.
 *  You should have received a copy of the GNU Affero General Public License
 *   along with this program. If not, please see
 *   <https://github.com/rgshw/parents/blob/master/LICENSE> or <http://www.gnu.org/licenses/>.
 **/
function getParams(e){var t={};if(location.search)for(var n=location.search.substring(1).split("&"),a=0;a<n.length;a++){var o=n[a].split("=");o[0]&&(e&&(o[0]=String(o[0]).toLowerCase()),t[o[0]]=o[1]||!0)}return t}var urlParams=getParams(!0),noAudio=urlParams&&urlParams.hasOwnProperty("noaudio"),played=0;function timer(){var e=new Date,t="";t+=12<e.getHours()?e.getHours()-12:e.getHours(),t+=":",t+=1==e.getMinutes().toString().length?"0"+e.getMinutes():e.getMinutes(),t+=":",t+=1==e.getSeconds().toString().length?"0"+e.getSeconds():e.getSeconds(),t+=12<e.getHours()?" pm":" am",document.getElementById("time").innerHTML=t;var n=e.getMinutes()%5;if(0==n&&e.getSeconds()<=3)played<=1&&(played+=1,noAudio||document.getElementById("ding").play()),document.body.className="change",document.getElementById("timeTill").innerHTML="Change!";else{document.body.className="",played=0;var a=60-e.getSeconds(),o=4-n+":"+(a=1==a.toString().length?"0"+a:a);document.getElementById("timeTill").innerHTML=o+" remaining"}setTimeout(timer,100)}if(noAudio)timer();else{var a=document.createElement("a");a.onclick=function(){a.parentElement.removeChild(a),timer()},a.style.zIndex="10000",a.style.position="absolute",a.style.width="100%",a.style.height="100%",a.style.top="0px",a.style.left="0px",a.style.display="flex",a.style.alignItems="center",a.style.justifyContent="center",a.style.background="rgba(255, 255, 255, 0.5)";var span=document.createElement("span");span.innerText="Please click on the page to start the Parents' Evening Timer.",a.appendChild(span),document.body.insertBefore(a,document.body.firstChild)}
